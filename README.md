# Techniques

## Replacing newlines

Replacing newlines in your log messages guarantees that every line in
your log files will be a single, complete message. I recommend  using
U+2424 SYMBOL FOR NEWLINE as the replacement character.

This can be done with a custom `Formatter`:

```python
class NewlineReplacingFormatter(logging.Formatter):
    def format(self, record: logging.LogRecord) -> str:
        return super().format(record).replace("\n", "␤")
```

## Prefixes

The goal is to write code like this and have *all* logs generated by
the job1 code be prefixed (regardless of what source files the actual
logging calls reside in):

```python
with log_prefix("[job1] "):
    # …code to run job1…
```

This can be done with a contextvar, a contextmanager, and a `Filter`
that attaches the current prefix to each log message:

https://github.com/kalgynirae/loggingtalk/blob/a9e55c027d906f94244c73d3d5e2f381e0b1a835/loggingtalk/logging.py#L74-L92

You'll also need to add `prefix` into the format string for your log
messages!

## (…and more coming soon!)
